---
title: "IS606 Final Project"
subtitle: "United States and Science Values"
author: "Daniel Dittenhafer"
date: "December 7, 2015"
output: pdf_document
---
```{r include=FALSE, cache=FALSE}
# DO NOT REMOVE
# THIS IS FOR SETTING SOME PLOTTING PARAMETERS SO THAT YOUR PLOTS DON'T TAKE UP TOO MUCH SPACE
# IF YOU WOULD LIKE TO CHANGE THESE, SEE HELP FILES ON THE par() FUNCTION
# OR ASK FOR HELP
library(knitr)
## set global chunk options
opts_chunk$set(fig.path='figure/manual-', cache.path='cache/manual-', fig.show='hold', par=TRUE)
## tune details of base graphics (http://yihui.name/knitr/hooks)
knit_hooks$set(par=function(before, options, envir){
if (before && options$fig.show!='none') par(mar=c(4,4,.2,.1),cex.lab=.95,cex.axis=.9,mgp=c(2,.7,0),tcl=-.3)
})
```

```{r, echo=FALSE}
library(plyr)
library(knitcitations)
library(RefManageR)
library(ggplot2)
cleanbib()
cite_options(style="markdown")

bibWorldValSurvey <- bibentry(bibtype="Misc", 
                              author=person(family="World Values Survey Association"),
                              title="WORLD VALUES SURVEY 1981-2014 LONGITUDINAL AGGREGATE v.20150418",
                              year=2014,
                              url="http://www.worldvaluessurvey.org/WVSDocumentationWVL.jsp",
                              note="Aggregate File Producer: JDSystems",
                              address="Madrid SPAIN"
                              )

bibWvsFieldworkSampling <- bibentry(bibtype="Misc", 
                              author=person(family="World Values Survey Association"),
                              title="Fieldwork and Sampling",
                              year=2015,
                              url="http://www.worldvaluessurvey.org/WVSContents.jsp")

bibPewViewsOnScience <- bibentry(bibtype="Misc", 
                                 author=c(person(family="Funk", given="Cary"), person(family="Rainee", given="Lee")),
                                 title="Public and Scientists’ Views on Science and Society",
                                 year=2015,
                              url="http://www.pewinternet.org/2015/01/29/public-and-scientists-views-on-science-and-society/")

# My ggplot theme
myTheme <- theme(axis.ticks=element_blank(),  
                  panel.border = element_rect(color="gray", fill=NA), 
                  panel.background=element_rect(fill="#FBFBFB"), 
                  panel.grid.major.y=element_line(color="white", size=0.5), 
                  panel.grid.major.x=element_line(color="white", size=0.5),
                  plot.title=element_text(size="10"))
```

### Part 1 - Introduction:

How have the values of people from the United States changed over time with regard to science and technology and its positive/negative impact on the world? The World Values Survey includes a question where in the survey respondent is asked to characterize their view of science and state of the world because of it `r citep(bibWorldValSurvey)`. Using the World Values Survey longitudinal data from 2006 and 2011, this project investigates changes in the views of United States respondents associated with science as well as correlations with educational level and/or the importance of religion.


### Part 2 - Data:

The World Values Survey is an observational study, and this data project will be analyzing a subset of the observational study conducted by the World Values Survey Association.
The data was collected and made available by the World Values Survey Association via their website. `r  citep(bibWorldValSurvey)`. 

The original data set in its entirety is available from the World Values Survey website: http://www.worldvaluessurvey.org/WVSDocumentationWVL.jsp

Although the World Values Survey was conducted in the United States starting in 1995, the question regarding science and the world (005_203) was not introducted until 2006. As such, only the cases from 2006 and beyond, 3481 cases across 2006 and 2011, are considered in this study.

#### Scope of Inferencce

Based on the data, collection methods and type of study, we review the scope of inference this data project can claim.

**Generalizability**: The population associated with the survey in this data project is the population of the United States between the ages of 18 and 85. *Is there bias, or is the data not representative of the age range?*

**Causality**: The data is derived from an observational survey and not an experiment. As such, no causality can be established from any conclusion.

#### Variables Included in Data Subset

The following table lists the variables extracted from the original World Values Survey dataset which will be considered in this data project.

 ID | Variable | Description
--|-----------|------------
005_203| E234 | The world is better off, or worse off, because of science and technology
010_023| S020 | Year survey
010_028| S024 | Country wave
010_004| S003 | Country/region
014_003| X003 | Age
014_030| X025 |	Highest educational level attained
001_006| A006	| Important in life: Religion

#### Response Variable

The response variable is the answer provided to the key question, "Is the world is better off, or worse off, because of science and technology?"

The answers are categorical in nature, but ordinal in their degree of support for the better/worse outcome. The distinct answer values and the description of each value are shown in the table below.

Value | Description
------|------------
1|A lot worse off
2|2
3|3
4|4
5|5
6|6
7|7
8|8
9|9
10|A lot better off
-5|Missing; Unknown
-4|Not asked in survey
-3|Not applicable
-2|No answer
-1|Don´t know

#### Explanatory Variable(s)

The explanatory variables considered for analysis are the "Highest educational level attained" value and the "Important in life: Religion" variable. Again, these are categorical variables, but ordinal in terms of level of education and degree of importance of religion. The values and descriptions for each variable follow:

**Highest educational level attained**

Value | Description
------|------------
1|Inadequately completed elementary education
2|Completed (compulsory) elementary education
3|Incomplete secondary school: technical/vocational type/elementary education, basic vocational qual.
4|Complete secondary school: technical/vocational type/Secondary, intermediate vocational qualification
5|Incomplete secondary: university-preparatory type/Secondary, intermediate general qualification
6|Complete secondary: university-preparatory type/Full secondary, maturity level certificate
7|Some university without degree/Higher education - lower-level tertiary certificate
8|University with degree/Higher education - upper-level tertiary certificate
-5|Missing; Unknown
-4|Not asked in survey
-3|Not applicable; No formal education
-2|No answer
-1|Don´t know

**Important in life: Religion**

Value | Description
------|------------
-5|Missing; Unknown
-4|Not asked in survey
-3|Not applicable
-2|No answer
-1|Don´t know
1|Very important
2|Rather important
3|Not very important
4|Not at all important

### Part 3 - Exploratory data analysis:

```{r, echo=FALSE}
# 
# Original WVS Data File, Size 1.4GB
#
#dataFile <- "C:/Users/Dan/Downloads/WorldValuesSurvey/WVS_Longitudinal_1981-2014_rdata_v_2015_04_18/WVS_Longitudinal_1981_2014_R_v2015_04_18.rdata"
#load(dataFile)
#colsToKeep <- c("E234", "S020",  "S024", "S003", "X003", "X025", "A006")
#WVS_Subset <- WVS_Longitudinal_1981_2014_R_v2015_04_18[,colsToKeep]
#save(WVS_Subset, file="C:/Code/R/IS606-ProbStats/FinalProject/data/WVS_subData.RData")
```

```{r loading-data, echo=FALSE}
# load data
dataFile <- "C:/Code/R/IS606-ProbStats/FinalProject/data/WVS_subData.RData"
load(dataFile)
colnames(WVS_Subset) <- c("KeyQuestion",
                          "Year", 
                          "CountryWave", 
                          "Country", 
                          "Age", 
                          "HighestEducation",
                          "ReligionImportant")
# Subset to just United States
WVS_US <- WVS_Subset[WVS_Subset$Country == 840, ]
WVS_US$CountryName <- "United States"
```

Let us explore the variables within the data subset. First, some simple summary statistics:

```{r summary-raw, echo=FALSE}
summary(WVS_US)
```

The following `R` output shows the mean and standard deviation of the response variable for the various years for which the survey was conducted. Unfortunately, in 1995 and 1999 the question regarding science was not asked as evidenced by the mean of -4 and standard deviation of 0. As a result, the focus will be on differences between 2006 and 2011.

```{r data-year-subset, echo=FALSE}
plyr::ddply(WVS_US, .(Year), summarize, 
            meanResponse=mean(KeyQuestion), 
            sdResponse=sd(KeyQuestion))

WVS_US_0611 <- WVS_US[WVS_US$Year > 1999,]

dfYearDist <- plyr::count(WVS_US_0611, "Year")
pc06 <- dfYearDist[dfYearDist$Year == "2006", "freq"]
pc11 <- dfYearDist[dfYearDist$Year == "2011", "freq"]
nrow0611 <- nrow(WVS_US_0611)
```

After eliminating the 1995 and 1999 data rows, `r nrow(WVS_US_0611)` cases remain. Of those, `r round(pc06 / nrow0611, 2) * 100`% are in 2006, and `r round(pc11 / nrow0611, 2) * 100` are in 2011.

```{r, data-distrib-year, echo=FALSE, message=FALSE}
g1 <- ggplot(data=WVS_US_0611) + 
  geom_bar(aes(x=Year), binwidth=1) +
  myTheme +
  labs(title="Response Distribution By Year")
g1
```

### Part 4 - Inference:


### Part 5 - Conclusion: 


### References:

```{r, results='asis', echo=FALSE}
BibOptions(style="html", bib.style="authortitle")
bibliography()
```

### Appendix (optional):

Remove this section if you don't have an appendix

